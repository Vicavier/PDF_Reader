第5章 协同进化搜索中的病态现象与分析  
5.1 协同进化的一般挑战

在第3章中，我们已经介绍并讨论了竞争性和合作性协同进化的两种框架，分别以算法3.1和3.2的形式给出。在我们对竞争与合作协同进化算法（CEAs）的讨论中，特别是关于基本过程组件，如变异算子和选择算子时，我们经常提及它们在设计上的考虑与进化算法（EAs）中的等效过程组件（见算法1.1）类似。这意味着，在设计高效CEAs组件时所遇到的大部分挑战与设计高性能EAs时是相同的。具体来说，需要在现有的解表示、变异和选择算子的设计选择与规范中，针对具体问题挑选出最为合适的，以实现（协同）进化搜索的有效与高效运行。

第1章已经对EAs这些基本组件相关的细节与挑战做了详细阐述，这些内容同样适用于CEAs。我们已在1.2.2节介绍了EAs中各种形式的解表示，并简要讨论了由于其特定结构而需考虑的相关设计事项。第3章中关于合作性CEAs在可加可分优化问题上的应用，大多在解表示实现方面相对直接，特别是在涉及已知基准问题的连续优化问题设置中 [41, 63, 66]。然而，第4章介绍了更具挑战性的问题求解环境，这些环境中CEAs需要更复杂的解表示方式。例如，文献 [60] 研究了通过合作性CEA结合遗传编程（GP）树结构对云计算资源分配规则的表示。在用于博弈类问题的竞争性CEAs应用中，多项研究探讨了复杂人工神经网络（ANNs）的使用，以提供博弈策略 [13, 16, 37, 40]。
任何解表示的使用方式都与特定的变异算子密切相关。这是因为变异算子的主要职责是根据当前种群中的父代候选解，生成新的子代候选解。实际上，在第1.2.3节中我们已介绍并讨论了解表示的形式和变异算子如何共同决定了搜索空间的邻域结构。因此，针对进化算法（EAs），对解表示和相关变异算子的设计考虑之间存在着紧密的联系。同样地，在协同进化算法（CEAs）中，也可以发现关于解表示与变异算子的类似研究和开发。例如，若采用具有多层结构的复杂人工神经网络（ANNs），则需要运用具备参数控制机制（如自适应机制 [13, 16]）的高级变异算子，以便能够对双人棋类游戏的策略进行有效的协同进化搜索。然而，如果能够通过领域知识发现并利用有用的不变量及其他关键结构，从而实现对解的更有效且紧凑的表示，那么仍可以采用更为简单的变异算子来保证协同进化搜索的有效性 [46, 48]。鉴于CEAs与EAs中的选择算子机制都是根据候选解的适应度值来决定其在下一代中被复制的概率，因此，选择算子的设计理应会对（协同）进化过程的搜索性能产生影响。如同前述，为EAs设计的相同选择算子（见1.2.4节）也被应用于CEAs中。然而，CEAs与EAs框架之间的主要概念差异体现在对生成的候选解的适应度评估上。因此，本章将着重介绍由候选解的相对和动态适应度度量所导致的协同进化过程的主要动力学特征。我们在此的出发点是揭示这些已被观察到对CEAs搜索性能产生负面影响的异常行为在协同进化过程中产生的原因及方式。本章其余部分分为两个主要部分。第5.2节将首先介绍并非正式地描述这些协同进化异常现象。为了更清楚地呈现异常现象如何影响完整解的协同进化搜索，我们将在讨论中采用竞争性协同进化设定。第5.3节将介绍近期针对此类问题和协同进化过程中特定结构而开发的新型框架的相关研究，并由此发展出用于对协同进化过程进行形式分析的工具，从而能够更精确地描述某些协同进化异常现象。本章最后将就如何应对这些异常现象及其对协同进化搜索过程产生的负面影响，给出相关的评论和讨论。

5.2  
协同进化搜索中的异常现象
在本节中，我们将介绍共进化病态（coevolutionary pathologies），该术语统称了在共进化过程中观察到的一些典型行为或动态，这些现象会影响共进化系统的搜索性能[6, 8, 11, 14, 22, 30, 55]。前两个小节将介绍并讨论文献中通常较为理解充分、且已有理论和实验方法用于研究的共进化病态。使用理论方法的一个关键优势在于，即便需要在简化和高度抽象的共进化系统上工作，但这些方法能够对相应病态现象进行更为精确的描述。第5.2.1节描述了首组病态：过度专化（overspecialization）、聚焦（focusing）和非传递性（intransitivity），这些病态可以通过研究共进化应用于求解问题时的问题结构来理解。第5.2.2节描述了第二组病态：循环（cycling）和遗忘（forgetting），这些病态则可以通过研究共进化过程的内部结构来理解。在共进化过程中，循环动态与共进化问题解空间的关系中的非传递性之间存在某些联系。第5.2.3节将介绍并讨论脱离交互（disengagement）和平庸稳定状态（mediocre stable states）这两种病态，相关文献中对它们的大多数研究均采用了实验手段。

### 5.2.1 过度专化、聚焦与非传递性

在共进化系统中，过度专化指的是种群中的候选解只关注于问题的某些特定属性，而没有涉及所有相关属性，从而无法全面地解决整个问题。这一特定的共进化病态已经被广泛研究，并且在学术界已得到较充分的理解。理解共进化中过度专化问题可以采用两种视角。在竞争性共进化环境下，其中一种视角是从候选解之间的两两交互出发，将它们视为两个玩家参与的竞争性博弈。换言之，所谓的共进化问题，即共进化旨在求解的问题，可以被视为双人对抗博弈。在解决方案的概念上，可以考虑在策略集合内，以两两比较的方式考察某一策略是否对其它所有策略具有支配性（dominance）。如果某个双人对抗博弈存在一个唯一的策略能够战胜集合中其它所有策略，则称该博弈存在“占优策略”（dominant strategy）[51]。然而，对于具有非常大策略集的博弈，其策略集合上的两两关系可能变得非常复杂。特别地，即使存在唯一的占优策略，也不能保证对于被占优策略的子集，必定存在一个对该子集内所有其它策略都占优的策略。

事实上，目前已知这些博弈能够允许二元关系结构，这些结构构成有序的分量序列（即策略子集）。更具体地说，排序较高的分量会支配位于其下方的分量，从而构成主导分量的传递链。然而，在每一个分量内都没有单一的占优策略[19, 50]。在这里，所呈现的情形是任一策略只专门针对某些其他策略，而非该分量内的全部策略[24]。这种现象的产生归因于分量内策略之间二元关系的非传递性。设有一组策略 $S$，如果策略 $s_i \in S$ 支配（即击败）策略 $s_j \in S$，则记为 $s_i \leftarrow s_j$。集合 $S$ 上的二元关系 $A$ 是传递的，当且仅当对于所有 $s_i, s_j, s_k \in S$，若 $s_i \leftarrow s_j$ 且 $s_j \leftarrow s_k$，则有 $s_i \leftarrow s_k$。非传递性发生在存在 $s_i, s_j, s_k \in S$ 使得 $s_i \leftarrow s_j$，$s_j \leftarrow s_k$，但 $s_i \rightarrow s_k$ 时。通俗地说，三元组 $s_i, s_j, s_k \in S$ 形成了一个循环结构，就如同经典的“石头、剪刀、布”三策略博弈中的情况，而不是传递链。我们将在后续的第5.3节中更详细地回顾和剖析该现象，并介绍一种基于有向图理论的分析共进化问题结构的理论工具。
另一种视角是从交互或博弈过程来考虑这一问题。具体来说，文献[65]提出了数字游戏（numbers games），为协同进化系统的研究提供了两项有益的特性。首先，这类游戏能够揭示在一组对象的两两比较（关系）中的非传递性本质，在这种情形中只能通过比较判断哪些对象更优。其次，通过某些特定的方式对集合中的对象进行组织，可以获得几何结构[8]，进而有助于突出协同进化系统中的聚焦问题[9]。通常，数字游戏涉及由自然数组成的$n$元组的集合$\mathbb{N}$。某个具体的数字游戏是通过规定如何计算任意一对$n$元组之间比较的结果以及选择满足$n \geq 2$的$n$值得到的。需要注意的是，如果考虑$n = 1$且不允许自我博弈（即不允许比较相同的数字），则集合$\mathbb{N}$上的二元关系$\ll$是传递的，因此该数字游戏所表示的问题就变得平凡。大多数研究[9, 65]都关注于包含2元组集合的双人数字游戏（即一对数字），因为这些游戏已经能引发诸如代理人过度专门化，仅专注于解决（击败）对手策略某些方面等协同进化病态。在对称的双人数字游戏中，双方可以选择实施集合$\boldsymbol{S} \subset \mathbb{N}^2$中的策略，每个策略由2元组$(x, y) \in \mathbb{N}^2$表示。假设第一位玩家执行策略$(x_1, y_1)$，第二位玩家执行策略$(x_2, y_2)$。对于一种被称为“非传递游戏”（intransitive game）的双人数字游戏，第一位玩家的收益函数如下所给：

$$
p_{\mathrm{IG}}\big((x_1,y_1),(x_2,y_2)\big) = 
\begin{cases}
1 & \text{若}~\delta_x > \delta_y \land y_1 > y_2\\
1 & \text{若}~\delta_y > \delta_x \land x_1 > x_2\\
0 & \text{否则}
\end{cases}
$$

其中，$\delta_x = |x_1 - x_2|, \delta_y = |y_1 - y_2|$ [9]。为简化起见，可以将该游戏限制为仅有胜负结果，即收益值较大的玩家获得胜利，并且通过当双方收益值相等时不出现平局结果来保证唯一胜者。这可以通过限制策略对的选择使得：(i) $x_1 \ne x_2$且$y_1 \ne y_2$（即不允许自我博弈），以及(ii) $\delta_x \ne \delta_y$来实现。

按照文献[65]中的例子，三种策略$s_1 = (1,6), s_2 = (4,5), s_3 = (2,4)$构成一个循环。该循环基于下面的直接计算结果得出：(i) $s_1 \leftarrow s_2$，此时$p_{\mathrm{IG}}(s_1, s_2) = 1$，因为$\delta_x > \delta_y \land y_1 > y_2$，且$p_{\mathrm{IG}}(s_2, s_1) = 0$，因为$\delta_x > \delta_y \land y_1 \ngtr y_2$；(ii) $s_2 \leftarrow s_3$，此时$p_{\mathrm{IG}}(s_2, s_3) = 1$，因为$\delta_x > \delta_y \land y_1 > y_2$，而$p_{\mathrm{IG}}(s_3, s_2) = 0$，因为$\delta_x > \delta_y \land y_1 \ngtr y_2$；(iii) $s_1 \rightarrow s_3$，此时$p_{\mathrm{IG}}(s_1, s_3) = 0$，因为$\delta_y > \delta_x \land x_1 \ngtr x_2$，而$p_{\mathrm{IG}}(s_3, s_1) = 1$，因为$\delta_j > \delta_i \land i_1 > i_2$。
通过对数字博弈中策略集 $\boldsymbol S$ 所蕴含的成对关系结构进行几何组织，可以有效地利用该结构来进行可视化分析 [8, 9]。一个偏序集（poset）$(\boldsymbol S, \preceq)$，通过二元关系 $\preceq$ 对 $\boldsymbol S$ 的元素进行比较与排序。（注：若禁止自比较，即在二人对弈的关系中不允许自我对弈，则得到一个缩减的偏序集 $(\boldsymbol S, \prec)$。）考虑一个包含 $S = \{s_1, s_2, s_3\}$ 的非传递性博弈。如果所有对局均在 $s_1, s_2, s_3$ 三元组上进行，且支配关系 $\leftarrow$ 满足传递性，则偏序集 $(\boldsymbol S, \leftarrow)$ 完全有序或线性有序，其在 $\boldsymbol S$ 上的关系可表示为 $s_1 \leftarrow s_2 \leftarrow s_3$，因为根据传递性有 $s_1 \leftarrow s_3$。可以非正式地理解及可视化地表示为，$\boldsymbol S$ 的元素可作为一维直线上的不同点，其排列顺序由其在线上的位置给定（如递增顺序为 $s_3 \rightarrow s_2 \rightarrow s_1$）。对于例子中 $s_1 = (1,6), s_2 = (4,5), s_3 = (2,4)$，由于非传递性，该三元组在成对关系下不可比，因此无法在线性的一维直线中排序。然而，该 $\boldsymbol S$ 可以嵌入到 $\mathbb{N}^2$，而 $\mathbb{N}^2$ 又可以嵌入（从而可视化于）二维空间 $\mathbb{R}^2$ [9]。对于任意策略 $s_i = (x, y)$，可分别记其在两维上的取值为 $s_i.x$ 和 $s_i.y$。在当前示例下，$(\boldsymbol S, \leftarrow)$ 在 $s.x$ 维度上有线性次序 $s_1 \rightarrow s_3 \rightarrow s_2$，在 $s.y$ 维度上有另一套线性次序 $s_3 \rightarrow s_2 \rightarrow s_1$。$(\boldsymbol S, \leftarrow)$ 能够嵌入到具有两组线性次序的二维空间，说明在 $\boldsymbol S$ 的成对关系中存在循环。

现在，假设在当前策略集基础上新增一个策略 $s_4 = (s_1.x + 10, s_1.y + 10) = (11,16)$。对于新的策略集 $\boldsymbol S \cup \{s_4\}$，可视化时，可以像之前一样将子集 $\{s_1, s_2, s_3\}$ 作为一个簇来表示，然后将 $\{s_4\}$ 放置在右上角。事实上，可以直接计算得到 $s_4$ 支配子集 $\{s_1, s_2, s_3\}$ 中的每一个策略。不过，我们也可以利用 $\{s_1, s_2, s_3\}$ 这一形成循环并嵌入于 $\mathbb{R}^2$ 的几何结构，以及关于博弈的知识：策略 $s_4$ 通过在两个维度上的取值均大于其他所有策略，而支配该子集，即 $s_4.x > \max \{s_1.x, s_2.x, s_3.x\}$ 且 $s_4.y > \max \{s_1.y, s_2.y, s_3.y\}$。需要特别指出，$s_4$ 并不是仅在其中一个维度上取更大值，而是在两个维度上都取更大值以支配其他策略。这体现在其几何位置上，即在 $\mathbb{R}^2$ 原点远离的对角线上，$s_4$ 位于 $\{s_1, s_2, s_3\}$ 这一策略簇的外部。
5.2.2 循环与遗忘

到目前为止，在当前的讨论中，我们使用循环这一术语来指代三元组 $s_i, s_j, s_k \in \boldsymbol{S}$ 上的二元关系的非传递性，区别于满足传递性属性的情况。有一些关于协同进化系统中种群动力学的研究。这里，关注点在于种群结构如何因变异与选择算子的反复应用而发生变化。主要关注的病态问题是循环种群动力学，简称为循环 [11, 14, 22, 30, 55]。在第一章的1.2节，我们曾描述过一个离散时间动力系统 $\mathcal{F}: \boldsymbol{\mathcal{X}} \rightarrow \boldsymbol{\mathcal{X}}$，其中，构成协同进化过程的变异算子 $\mathcal{V}$ 和选择算子 $\mathcal{S}$ 作用在种群配置空间 $\boldsymbol{\mathcal{X}}$ 上，即 $\mathcal{F} = \mathcal{S} \circ \mathcal{V}$。这种数学抽象与建模的方法也被应用于协同进化 [35, 62]。这类协同进化动力系统允许通过种群配置空间 $\boldsymbol{\mathcal{X}}$ 中的轨迹 $\{{\boldsymbol X}_{1},{\boldsymbol X}_{2},{\boldsymbol X}_{3},\ldots\}$，由抽象协同进化模型 $\mathcal{F}$ 迭代生成，从而分析复杂的协同进化种群动力学。特别地，周期循环状态的概念被用以更精确地描述协同进化中观察到的循环种群动力学。具体来说，周期为 $n \geq 1$ 的周期循环被描述为一条种群配置或状态的轨迹或序列 $\{{\boldsymbol X}_{1},{\boldsymbol X}_{2},{\boldsymbol X}_{3},\ldots,{\boldsymbol X}_{n}\}$，其会重复出现，例如，当 ${\boldsymbol X}_{n} = {\boldsymbol X}_{1}$。在后续的5.3节中，我们将给出这样的协同进化动力系统的精确理论表述，从而能够对种群动力学进行严格分析。在本节的其余部分，我们首先介绍并讨论由协同进化过程导致的、与病态搜索相关的动力学状态。至关重要的是，必须区分由协同进化 $\mathcal{F}$ 在种群配置空间 $\boldsymbol{\mathcal{X}}$ 上作用所造成的种群动力学循环结构，以及在策略集 $\boldsymbol{S}$ 上的成对关系 $\leftarrow$ 导致的循环结构。这两者分别描述协同进化系统中的不同层面，前者与协同进化过程相关，而后者则与协同进化问题相关。尽管如此，这两类循环结构之间存在联系，因为协同进化过程中的选择机制是通过评估由种群个体实现的策略间相互作用的结果来进行的，而这些结果又由策略集中的成对关系结构决定 [19]。例如，对于具有非传递性的“石头-剪刀-布”博弈，其抽象协同进化动力系统的相图（相位图）会反映出循环动力学。例如，文献[30]绘制了这样的相图，其轨迹在内嵌于 $\mathbb{R}^{2+1}$ 的二维标准单纯形 $\mathbb{S}^{2}$ 上。 （非正式地说，维度之所以减少一，是由于各策略的比例之和为一，已知两种策略所占比例便可得出剩余一种的比例。）这里相空间或种群配置空间 $\boldsymbol{\mathcal{X}}$ 就是 $\mathbb{S}^{2}$，包含了三种策略“石头”、“剪刀”和“布”在种群中的具体混合或比例分布。
周期性循环动态的产生是由于相空间中存在不稳定的平衡点，这些平衡点代表特定的人口配置，并作为斥力点。其动态表现在于，邻近这些斥力平衡点的轨迹（例如，任何微小扰动，如变异算子的作用导致种群配置改变）都会远离这些平衡点。具有三种纯策略可供代理选择实施的共进化动力系统，可能存在表示单态和多态平衡的固定点，分别对应仅实施一种策略及至少实施两种策略的人口配置。在“石头、剪刀、布”博弈中，共进化动力系统包含一个不稳定的多态平衡点，其对应石头、剪刀、布三种策略的比例相等，以及三个单态平衡点，分别对应于均为石头、剪刀或布的种群。直观上，单纯形 $S^2$ 是一个等边三角形，每个顶点包含一个鞍点，而其中心则为不稳定的多态平衡点。该中心同时也是纳什均衡点，因为在一个所有代理以相等比例实施石头、剪刀、布策略的种群中，在完全混合的情形下（即每个代理与所有代理对战，包括自我对战），每个代理都将获得相同的博弈收益。三个顶点的鞍点是由于石头、剪刀、布策略之间关系的非传递性。鞍点在其动力学中既有吸引分量也有排斥分量。如果仅考虑沿单纯形 $S^2$ 边的动态，则任何非顶点处点都对应于仅采用两种策略的种群配置，其轨迹会被吸引到一个顶点并被对面顶点排斥。例如，任何非顶点处点会被吸引到全为剪刀的顶点，同时远离全为石头的顶点。因此，对于从单纯形 $S^2$ 内部非平衡点出发的轨迹而言，它们会在相空间内发生循环。一般来说，多个具有斥力动态的不稳定固定点的存在，会导致各种循环动态，包括周期性的循环动态。因此，即使对于像鹰鸽博弈这类只有两种纯策略的共进化动力系统，也可能出现循环动态，这是因为该类博弈的结构使得多态和单态平衡点都是不稳定的 [35]。此外，涉及更为复杂博弈（例如具有更多选择的迭代囚徒困境（IPD））的共进化系统中，也通过关于博弈领域知识的单值测度 $S^n \rightarrow \mathbb{R}_{\geq 0}$ 对进化中的种群配置观察到了循环动态现象 [15, 25]。

共进化动力学中遗忘的病态问题，指的是种群配置的变化序列，其中早先出现过的、具有某些特定行为特征的代理消失，随后又被重新发现。文献 [30] 总结了三种在共进化过程中性状丢失的情形。第一种情形是，由于拥有该性状的策略会使代理获得更低的适应度，因而在共进化过程中被选择淘汰。后两种情形则涉及该性状被正向选择，然而，由于选择压力较小，变异算子的作用会导致漂变；或者，在更极端的情况下，变异算子本身对该性状存在固有偏好，使其难以在后代中出现。在行为特征讨论中，可以先考虑纯策略作为完全表达性状的直接情形。例如“石头、剪刀、布”博弈。可构建共进化动力系统，通过来自变异算子的特定扰动，展示表现出遗忘病态的循环动态。其表现为经过单纯形 $S^2$ 边的扰动轨迹，使得种群周期性地不实施其中一种策略。然而，行为特征还可指某些策略或其子集在对抗对手策略时采用游戏行为的某些方面。一个简单例子是数字博弈，其中性状对应特定维度。另一个例子是 IPD 博弈，行为性状可以指策略倾向于某种博弈选择（如合作、背叛），或者涉及中间层次的合作以及合作和背叛的组合等更复杂的博弈行为。因此，对于具有中等合作水平的 IPD 策略的共进化，循环动态可能伴随行为特征遗忘的问题。
5.2.3 脱节与平庸稳定状态

在本小节中，我们将介绍并讨论关于协同进化过程中另外两类剩余的病理现象，这些病理现象在相关文献中大多数研究都通过实证方法进行了调查。此外，这些研究主要针对通常出现在双种群竞争性协同进化这一更复杂环境下的两类病理。这与前面两组病理的情况不同，后者的研究通常可以在相对简单的单种群竞争性协同进化背景下进行。尽管如此，通过受控的实证研究，仍然可以揭示这最后一组协同进化病理，并隔离出导致这些病理的具体环境设置。关于这些病理现象给出的一些解释，来源于如进化生物学等其他研究领域。

脱节（disengagement）病理指的是在具有非对称交互的双种群竞争性协同进化（如捕食者-猎物协同进化）中，其中一个种群在大多数情况下都优于另一个种群的情形 [11]。当出现这种情形时，相对适应度评价便不再有用，因为对立族群已无法区分当前种群的表现。一个典型例子是基于捕食者-猎物协同进化模型的机器人适应研究，在进化机器人学中模拟自然界中发生的追捕-逃避交互 [21]。在此背景下，Red Queen效应在文献 [64] 中被提出，用以解释两个协同进化种群之间持续的军备竞赛过程——两者在进化时间维度上轮流削弱并抵消对方通过响应性适应获得的、曾带来适应优势的新特征。只要在种群适应阶段与对方种群的反适应阶段，种群内部存在足够的多样性，这种耦合种群间的动态关系就有可能持续存在。
然而，有可能当前种群的成员发现了一种对抗种群具有内在优势的特定适应性特征，并且这种特征能在一个较短的进化周期内通过繁殖迅速扩散至整个种群。随之而来的是“脱离作用”（disengagement）的出现，因为当前种群的大多数成员在竞争中表现优于对抗种群。当这种情况发生时，相对适应度（relative fitness）将不能再用于区分种群成员的优劣，导致它们开始发生遗传漂变（genetic drift）（例如通过变异算子实现）[11]。同样，对抗种群中也可能发生类似的动态变化。当该种群的成员大多被击败，并且获得同样较低且无法区分的适应度值时，对抗种群也会发生漂变。当这种情况出现时，这两个共进化种群被称为完全脱离（full disengagement）。在文献[11]中还识别出了另外两种脱离的程度。

**不对称脱离（asymmetrical disengagement）**  
当一个种群达到全局最优，而对抗种群则开始漂变时，即会发生不对称脱离。例如，在主-寄生体竞争共进化求解排序网络（sorting networks）的问题中 [44]，文献[11]描述了不对称脱离的一种场景，该现象会削弱搜索性能。需要注意，主-寄生体竞争共进化除了以搜索最优排序网络为主要目标外，还可能有寻找最佳测试列表的次要目标。假设该问题设定下，表现也存在不对称性，即最佳排序网络能够排序最难的测试列表。如果排序网络种群进化到发现全局最优解的阶段，则会发生不对称脱离。此时，全局最优解会开始扩散，而在测试列表的对抗种群中则出现遗传漂变，从而停止了对更难测试用例的搜索。在此情景下，共进化系统虽然实现了主要目标，但失败于达成次要目标。此外，如果共进化系统继续运行，持续的遗传漂变可能会把有害的变异引入排序网络种群，尤其当选择算子包含非精英选择（nonelitist mechanism）时，有可能导致即使是最优解也会丢失。

**合谋脱离（collusive disengagement）**  
当两个共进化种群中的一个进入特定的稳定配置或均衡状态，其成员均具有次优表现时，即出现合谋脱离。然而，该群体被称为“合谋”，是因为这些成员具有相似的适应度值。文献[11]以抛硬币博弈为例，阐述了这种现象。该系统由生成器（generators）和预测器（predictors）两个种群共进化。在该问题下，最优解为：生成器以$50:50$的概率随机产生正反面，预测器则以相等概率预测游戏的两种结果。然而，也可能出现这样的情形：预测器种群中一半成员总是猜正面，另一半总是猜反面。这些预测器从平均意义上来看都是“专家”，获得相近的适应度或表现；但作为整个种群，它们合谋，形成了一种混合策略，对多样的生成器种群极为有效。此时，生成器种群则可能由于不对称脱离而出现遗传漂变。这种种群结构的有效性意味着进化过程将很难进一步搜索到实际的最优个体预测器。保持这种种群结构会有很强的选择压力，因此该状态在文献[31]中被称为“平庸稳定态（mediocre stable states）”的病态问题。实际上，生成器种群也可能进入类似状态，表现为相同比例地总是抛正面和总是抛反面的成员共存。此时，生成器和预测器两个种群都处于合谋状态。
5.3 协同进化搜索的分析

本节将介绍两个用于分析竞争型协同进化系统的正式理论框架。这些理论框架能够精确描述协同进化系统在执行搜索时所表现出的显著特性。它们揭示了导致协同进化系统在求解问题过程中可能产生的多种协同进化病态的主要结构。更为关键的是，这两大理论框架为构建可用于严密分析协同进化系统的工具提供了方法。第5.3.1节首先将介绍一种基于有向图理论的竞争型协同进化问题结构分析的形式化框架。接着，第5.3.2节将介绍一种基于动力系统理论的竞争型协同进化过程分析的形式化框架。

5.3.1 协同进化问题中的循环结构

最近，我们[19]提出了一个框架，该框架利用有向图（digraphs）来捕捉所有包含确定性结果的两方博弈中任意协同进化问题的整体结构，这种问题通常见于竞争型协同进化环境[1, 13, 15, 25, 36, 40]。该协同进化问题被表示为协同进化有向图 $D_C = (V_S, A_R)$。其中，顶点集代表解（策略）集 $V_S = S$，每个不同的顶点 $v \in V_S$ 对应于唯一的解（即纯策略）。弧集则刻画了$S$上的二元关系，可表示为 $A_R = R$，其中每一条有向弧（有向边）在某一方向 $u \leftarrow v$ 或 $u \rightarrow v$ 或双向 $u \leftrightarrows v$，均对应于策略对 $u, v \in V_S$ 之间的成对偏好关系。通过这种方式，各类协同进化问题作为两方战略博弈均可由这些有向图表示，从而完整地刻画了相应策略集上的成对关系（优势关系）结构。
一对策略之间的对抗，通过有向图中连接两个顶点$u,v \in V_S$的边$\{u, v\}$来表示。需要注意的是，底层图$D_C$是完全图，因此任意一对顶点之间都存在一条边，即任意一对策略之间都会进行对弈。对弈的胜负结果由该边的方向来表示，例如，弧$u \leftarrow v$表示$u$支配（击败）$v$。通过这种方式，共进化锦标赛表示了一个由两名玩家参与的共进化问题模型，其中，特定策略集合内的所有策略都会彼此竞争（除了自对弈）。如果结果包含平局，即$u \leftrightarrows v$，那么所有具有胜-负-平局结果的此类共进化问题，都属于“共进化半完全有向图”这一家族。下文中，我们将讨论聚焦于“共进化锦标赛”这一家族，它足以用于展示图论中有关环结构的概念，这对于完整刻画共进化中的问题结构至关重要。我们接下来将介绍一些将在后续讨论中使用的有向图的概念及性质。

支配关系的概念可以扩展到$V_S$的子集，其中，单个顶点即为只包含一个元素的$V_S$子集。对于两个不相交的子集$V_S^1$与$V_S^2$，其中$V_S^1 \cap V_S^2 = \emptyset$，记$V_S^2 \Leftarrow V_S^1$表示$V_S^2$中的所有顶点都支配$V_S^1$中的所有顶点。

在有向图$D_C=(V_S, A_R)$中，一条“游走”（walk）定义为顶点和弧交替出现的序列$v_1a_1v_2a_2v_3\ldots a_{k-1}v_k$，其中$v_1,\ldots,v_k \in V_S$，$a_1,\ldots,a_{k-1} \in A_R$。通常可以简写为$v_1v_2v_3\ldots v_k$。游走的长度为其中包含的弧的数量，在上述定义中即为$k$。若$v_k = v_1$，则该游走为“闭合游走”。进而，可以定义$(v_1,v_k)$-路径，即所有顶点均不重复出现的游走。$k$-环则是长度为$k \geq 3$的闭合$(v_1,v_k)$-游走，并且该环由$(v_1,v_{k-1})$-路径构成。

若对任意一对不同的顶点$u, v \in V_S$，都存在$(u,v)$-路径和$(v,u)$-路径，则该有向图是“强连通的”（strongly connected，简称strong）。

若有向图的顶点集$V_S$可被划分为两个不相交且非空的子集$V_S^1$与$V_S^2$，满足$V_S^1 \cap V_S^2 = \emptyset$且$V_S^1 \cup V_S^2 = V_S$，并且这两个子集之间的所有边都朝向某一个方向（即$V_S^1 \Rightarrow V_S^2$或$V_S^1 \Leftarrow V_S^2$），则称该有向图是“可约的”；否则为“不可约的”。实际上，所有不可约的有向图根据定义都是强连通的。需要注意的是，可约有向图$D$的顶点划分诱导出了子有向图，例如$D^1$和$D^2$。对于子有向图$D^{(i)}$，我们记其顶点集为$V(D^{(i)})$，弧集为$A(D^{(i)})$。

通过图论的语言，我们能够更精确地描述此前用于说明与共进化病态相关环结构的博弈的具体属性——此前这些属性通常只是非正式地加以解释。

例如，石头-剪刀-布博弈的结构可以通过共进化有向图$D_C = (V_S, A_R)$来刻画，其中$V_S = \{v_1, v_2, v_3\} = \{\mathrm{Rock},\mathrm{Paper},\mathrm{Scissors}\}$，$A_R = \{v_1 \rightarrow v_2, v_2 \rightarrow v_3, v_3 \rightarrow v_1\}$。对于该含有三种策略的博弈，三元组本身就是策略集。该三元组中支配关系的不传递性（非传递性），正好通过$(v_1,v_3)$-路径上的3-环$v_1v_2v_3v_1$准确地表达出来。由于该闭合环和路径都包含了$V_S$中的所有不同策略，因此二者都被称为“哈密顿”（Hamilton）环路。
在另一个一维数字游戏的例子中，设 $V_S = \{v_1, v_2, v_3\} = \{1,2,3\}$，$A_R = \{v_1 \rightarrow v_2, v_2 \rightarrow v_3, v_1 \rightarrow v_3\}$，这个三元组满足传递性性质。此处，共进化有向图为 $D_C = (V_S, A_R)$，该有向图是传递的。假设 $v_1, v_2, v_3, \ldots, v_n$ 是 $V_S$ 的一种排序，对于所有的弧 $v_i \rightarrow v_j \in A_R$，都有 $i < j$。这样的有向图被称为具有无环排序，进一步地，无环有向图没有环路。实际上，众所周知，一场锦标赛当且仅当其无环时才是传递的[5]，因为所有支配关系都可以单调地表示为 $v_1 \rightarrow v_2 \rightarrow v_3 \rightarrow \cdots \rightarrow v_n$。石头-剪刀-布游戏和只有三种策略的一维数字游戏，在具备有向图理论术语后似乎成为了简单的例子。然而，用循环结构与无环排序来刻画锦标赛的思想能够被推广到更大的锦标赛中。特别地，为了获得这些刻画的理论结果，已经利用了如下事实：非哈密顿的低阶环路可以被打包到 $V_S$ 的子集中作为强连通分量，并且这些强分量之间的支配关系是单调的。实际上，使用有向图表示的动机不仅在于它能够自然地捕捉共进化问题中的所有相关结构，还可以利用有向图理论，特别是锦标赛理论[50]中的各种工具和有力结果，对其进行严密分析。具体而言，我们在[19]中将有向图理论中的不可约性概念与博弈论中的可解性概念联系起来，以定性地刻画这些共进化锦标赛。实际上，一个主要结果是，共进化锦标赛要么是可解的（即存在占优策略子集），要么不是。一个可解的共进化锦标赛 $T_C = (V_S, A_R)$ 是可约的，也就是说，策略集可以通过占优子集进行顶点划分，例如 $V_S^1 \Rightarrow V_S^2$。共进化锦标赛中的循环结构决定了其是否可解（可约）。主要的技术结果之一是，证明一个可约的共进化锦标赛 $T$ 可以被强分解为若干个子有向图 $T^{(1)}, T^{(2)}, T^{(3)}, \ldots, T^{(l)}$，其中 $\bigcup_{i=1}^l V\big(T^{(i)}\big) = V(T)$ 且当 $i \neq j$ 时，$V\big(T^{(i)}\big) \cap V\big(T^{(j)}\big) = \emptyset$。此外，每个子有向图都是一个强连通分量，并且它们之间形成一个可单调表示的支配关系链，即 $V\big(T^{(1)}\big) \Rightarrow V\big(T^{(2)}\big) \Rightarrow V\big(T^{(3)}\big) \Rightarrow \cdots \Rightarrow V\big(T^{(l)}\big)$。另一个主要技术结果是，不可约的共进化锦标赛 $T$ 是强连通的，并且进一步具有顶点全环性质，即对于每个 $v \in V(T)$ 和每个 $k \in \{3,4,5,\ldots,n\}$，在锦标赛 $T$ 中都存在包含 $v$ 的 $k$ 元环。正因如此，我们能够利用有向图理论分析揭示共进化问题中出现的所有循环结构。我们的分析显示，这些循环结构比以往文献所揭示的更为复杂。例如，低阶循环在不同程度上包含于高阶循环中，即便在被建模为马尔可夫链的单种群共进化的简单场景下，也会影响搜索性能[19]。这些结果也与其他理论研究（如[49]）相印证，该研究专门考察当在共进化算法（CEA）中构建具有关键性质的合适目标测度时，会导致类似进化算法（EA）的搜索行为。例如，对于具有赢-输结果（内部主观性能度量）的共进化问题，如果解之间形成传递链，则其排名等价于由解的得分序列（即赢的次数）给出的外部客观性能度量。
我们以对协同进化锦标赛的示例描述结束本小节，旨在突出人们能够从这些循环结构中获得的关键属性。只需对一个传递性锦标赛进行一次弧反转，就可以轻易地获得一个顶点泛循环协同进化锦标赛。对于一个根据非循环排序 $v_1, v_2, v_3, \ldots, v_n$ 给顶点标号的传递性锦标赛，一端的 $v_1$ 代表表现最差、没有胜利的策略，而另一端的 $v_n$ 代表表现最佳、获胜次数最多（即 $n-1$ 次）的策略。三元组 $v_1, v_2, v_n$ 之间的优势关系为 $v_1 \rightarrow v_2, v_2 \rightarrow v_n, v_1 \rightarrow v_n$。只需将弧 $v_1 \rightarrow v_n$ 反转为 $v_1 \leftarrow v_n$，即可生成一个顶点泛循环锦标赛 $T$。实际上，$T$ 拥有一个哈密顿环 $v_1v_2v_3{\ldots}v_nv_1$，其对应的哈密顿路径为 $v_1v_2v_3{\ldots}v_n$。这样的顶点泛循环锦标赛中包含的三元环（3-圈）数量最少 [10]。一个规则锦标赛（即每个顶点拥有相同数量的入弧（代表它赢得的比赛）和出弧（代表它输掉的比赛））则拥有最多的三元环。只有具有奇数个顶点的锦标赛才能是规则的，这也是只有三个顶点的最小规则锦标赛（如“石头-剪刀-布”游戏）的一种推广。非正式地说，协同进化从包含最多三元环的规则子组件中逃逸所需的时间，比从三元环数量最少的子组件中逃逸要更长 [19]。

5.3.2 协同进化过程中群体动力学

我们首先将把竞争性协同进化具体表述为离散时间动力系统，然后在这种数学框架下，讨论由协同进化过程生成的群体动力学中所蕴含的复杂循环结构。研究 [35] 首次将协同进化的这一类动力系统形式化，尽管早期的文献 [38] 以及后续的 [39] 也通过计算机生成的轨迹对协同进化的人群动力学进行了经验研究。我们在第 5.2.2 节已经介绍过群体动力学的概念，即将其视为一组轨迹，每条轨迹是特定的前向序列 $\{X_n : n \in \mathbb{N}_{\geq 1}\} = \{ F_0(X_1), F_1(X_1), F_2(X_1), \ldots \}$。
$\{\boldsymbol{X}_n : n \in \mathbb{N}_{\geq 1}\} = \big\{\mathcal{F}^0(\boldsymbol{X}_1), \mathcal{F}^1(\boldsymbol{X}_1), \mathcal{F}^2(\boldsymbol{X}_1), \ldots\big\}$

是由协同进化过程 $\mathcal{F} : \boldsymbol{\mathcal{X}} \rightarrow \boldsymbol{\mathcal{X}}$ 从初始状态 $\boldsymbol{X}_1 \in \boldsymbol{\mathcal{X}}$ 生成的人群（种群）配置序列。

使用动力系统作为协同进化的抽象数学模型有两个动机：（1）在某些设置下，协同进化过程的机制可以被适当地形式化；（2）这些轨迹的行为或规律，无论简单还是复杂，都可以进行定性刻画和精确定义。

然而，由动力系统 $\mathcal{F}$ 作用于高维度度量空间 $\boldsymbol{\mathcal{X}} = (\mathbb{R}^D, d)$ 下的种群动力学（其中参与竞争性协同进化的个体能够从包含大量 $(D - 1)$ 个纯策略的策略集合中选择策略）具有非常丰富的表现形式。实际上，正如前文所指出，即便是在只有两种纯策略的情形下，协同进化也可能产生复杂的种群动力学。

尽管如此，仍然可以对这些系统进行可解释的定性与定量刻画。因此，大多数相关研究 [35, 38, 39, 61, 62] 考虑了如“鹰-鸽博弈”这样的二人、两纯策略博弈中的协同进化。值得注意的是，动力系统分析方法也同样适用于协作型协同进化场景 [53, 54]，尽管该设置更加复杂，因此大多数分析依赖于计算机生成的轨迹数据。

在本小节的剩余部分，我们将讨论涉及二人两纯策略博弈的协同进化动力系统，并在下文对其作正式描述。它们属于一类由函数 $f: \boldsymbol{\mathcal{X}} \rightarrow \boldsymbol{\mathcal{X}}$ 在带有距离度量 $d$ 的度量空间（例如实数紧区间 $([0, 1], d)$）上定义的一维离散时间动力系统。随后，我们使用简化记号 $f: [0, 1] \rightarrow [0, 1]$。

映射 $f$ 在 $[0,1]$ 上的作用会生成一个由差分方程
$$
x_{n+1} = f(x_n) \in [0, 1], \quad n \in \mathbb{N}_{\geq 1}
$$
描述的轨道（轨迹），其初始条件为 $x_1 \in [0, 1]$。$x_1$ 的真实轨道是序列
$$
\{x_n : n \in \mathbb{N}_{\geq 1}\} = \{x_1, f(x_1), f^2(x_1), \ldots\}
$$
其中，$f^m, m \in \mathbb{N}$ 表示对 $x_1$ 的 $f$ 函数的多次迭代，且 $f^0(x_1) = x_1$，$f^n(x_1) = f\big(f^{n - 1}(x_1)\big)$。

在上述背景下，文献 [35] 的一个主要贡献在于识别了通过演化博弈论（EGT）[58] 将竞争性协同进化与动力系统建模对接的主要接口。协同进化过程的模型假定：（1）有一个无限大种群（每个个体只采用两种纯策略之一参与博弈）；（2）每个体与种群中所有其他个体互动（即完全混合），并根据博弈结果累积收益；（3）每个体根据其累计收益进行无性繁殖（仅产生克隆个体）。

借此，博弈形式、选择机制的不同具体设定等，都会导致不同的复制子映射 $f: [0,1] \rightarrow [0, 1]$ 的构建方式 [45, 57]。我们考虑如下形式的交互，即二人、两纯策略的对称博弈，其为一次性、同时性的博弈，结果由正规型收益矩阵
$$
\mathbf{A} = (a_{ij} : 1 \leq i, j \leq 2)
$$
给出，每个元素 $a_{ij}$ 表示第一位玩家获得的非负收益。

令 $p_1, p_2 \in [0, 1]$ 分别表示无限大种群中两种策略的比例。由于策略可遗传，并且在任意一代（第 $t$ 代），全体个体竞争获得收益，这决定了他们的平均繁殖成功率，因此，复制子映射 $f$ 决定了随时间 $t$ 推移，种群状态 $p_1, p_2$ 的变化规律。为形式化 $f$，将策略比例收集为状态（列）向量
$$
\mathbf{p}(t) = \big(p_1(t), p_2(t)\big)^{\mathsf{T}}
$$
关联的策略累计收益向量为
$$
\mathbf{w}(t) = \big(w_1(t), w_2(t)\big)^{\mathsf{T}} = \mathbf{A} \mathbf{p}(t),
$$
于每个迭代步 $t$ 计算。

令 $p_1 = p$，$p_2 = 1 - p_1 = 1 - p$。那么，
$w_1 = p_1 a_{11} + p_2 a_{12} = p a_{11} + (1 - p) a_{12}$

$w_2 = p_1 a_{21} + p_2 a_{22} = p a_{21} + (1 - p) a_{22}$

复制子映射$f(p_i) = \dfrac{p_i w_i}{\sum_{i=1}^2 p_i w_i}$采用适应度比例选择。对于$p_1$，有$f(p) = \frac{p \cdot w_1}{p \cdot w_1 + (1 - p) \cdot w_2}$。

注意，该协同进化动力系统是一维的，因为由$f$给出的动力学演化在一维的标准单纯形$\mathbb{S}$（嵌入于$\mathbb{R}^2$中）上，并且对所有$t = 0, 1, 2, \ldots$都有$\sum_{i=1}^2 p_i(t) = 1$。当使用 $p(t+1) = f\big(p(t)\big)$（即只观察$p = p_1$在时间上的变化）时，动力学方程$p(t+1) = f\big(\mathbf{p}(t)\big)$仍然成立。因为$\mathbb{R}^2$中代表$p_1$的坐标轴上的紧区间$[0,1]$对应的线段是单纯形$\mathbb{S}$的一个投影。

此外，还构造并研究了模拟不同选择机制的其他复制子映射[35, 62]。非正式而言，协同进化动力系统最佳被视为用来研究选择作用下长期种群动力学的模型。变异（如突变）的作用可以在具体有限扰动的轨迹上考虑，同时还包括其他在选择之外导致种群状态改变的因素，如有限种群效应[61, 62]。

更重要的是，我们现在能够将这些协同进化动力系统形式化为具体的复制子映射$f: [0,1] \rightarrow [0,1]$，从而能够利用动力系统理论丰富且有力的语言对这些映射生成的种群动力学进行精确研究和描述。设$\mathcal{O}_f = \{x_n: n \in \mathbb{N}\}$为$f$生成的轨道。对由协同进化复制子映射$f$生成的轨道，存在多种关联的动力学行为或状态，这里我们将做简单介绍。

一种简单的状态涉及$f$的一个不动点，即$f(q) = q \in [0,1]$，我们用$\mathcal{O}_f = \{q\}$专门表示$f$的不动点轨道。这一概念可以扩展到$f^k$的不动点，用以描述周期为$k$的周期轨道，其定义为$k$个不同点的序列：

$$\mathcal{O}_{f^k} = \{q_1, q_2, q_3, \ldots, q_k\} = \{f^0(q_1), f^1(q_1), f^2(q_1), \ldots, f^{k-1}(q_1)\}.$$

注意，这里假设极小性条件，即对于$\mathcal{O}_{f^k}$中的任意$q$，有$f^j(q) \neq q, 1 \leq j \leq k - 1$。特别地，当对于$\mathcal{O}_{f^k}$中的所有$q_i$都有$f^k(q_i) = q_i \in (0, 1)$时，$\mathcal{O}_{f^k}$被称为一个循环（cycle）。对于循环$\mathcal{O}_{f^k}$，一个重要的性质是：若系统从周期点$q_i \in \mathcal{O}_{f^k}$（周期为$k$）出发，则其轨道将一直保持在$\mathcal{O}_{f^k}$中（即无限期地在$\mathcal{O}_{f^k} = \{q_1, q_2, q_3, \ldots, q_k\}$循环，当$k \geq 2$）。
动力系统理论精确描述的另一个概念是$p$的轨道累积到一个不动点的情形 [7, 28]。一个经常通过对现实世界系统的观测或计算机模拟测量得到的现象，是轨道进入并停留在不动点时的长期行为。具体来说，周期为$k$的周期轨道${\boldsymbol {\mathcal{O}}}_{f^k}$被称为吸引的，如果邻域内点$p$的轨道会积聚到该周期点上，即$f^j(p) \rightarrow {\boldsymbol {\mathcal{O}}}_{f^k}$当$j \rightarrow \infty$时 [28]。因此，周期为$k \geq 2$的吸引周期轨道也被称为周期为$k$的极限环，在竞争共进化的研究中已经被报道过 [35, 38]。此类极限环的一个典型特征是，无论是通过观测还是计算机生成，群体状态轨迹最初在状态空间$[0, 1]$中游走，而后很快进入周期性，因为它们进入了其中一个周期点。

除了这些在共进化动力学研究中有充分文献记载的吸引不动点和周期轨道外，还可以在共进化中的群体动力学中观测到更为复杂的行为。这些行为被认为与混沌动力学有关 [35, 38]，但在当前的共进化动力学文献中尚未被精确描述。部分原因在于，大多数共进化动力学的研究是基于计算机生成的轨迹，并在较短的时间尺度上进行的。在[35]中，归因于混沌的群体动力学实际上是在$10^4$次迭代下产生的计算机伪轨道（伪轨迹），而这些轨迹受到有限计算精度误差的影响。然而，众所周知，混沌动力学具有对初始条件的极端敏感性，即两个相邻点的轨道会呈指数级分离（例如，如果初始距离为$10^{-14}$，典型的误差倍增率意味着大约50次迭代后误差将达到单个单位，即$\approx 2^{50} \times 10^{-14}$） [43]。但在某些动力系统研究中已被严格证明，通过混沌映射产生的计算机伪轨道可以在$10^5$次迭代范围内被精确跟踪 [20]。我们[61, 62]已开始通过可能具有双曲性质的连续复制子映射$f$，研究共进化中的混沌动力学。这一点至关重要，因为双曲映射在结构上是稳定的，轨道结构丰富且鲁棒。尽管对初始条件有敏感依赖性，双曲映射具有影子轨道（shadowing property），即使每一步都受到有限扰动而产生的伪轨道，也能被一条真实轨道紧密跟踪。正如利用有向图理论分析共进化问题中的环结构，采用动力系统理论中的更多方法的动机，是能够严格分析这些存在于更复杂及混沌动力学下的精细结构，并在特定情况下（如影子动力学）利用计算机辅助工具。实际上，混沌动力学中这两种表面上对立的特性，恰恰为研究展现极为复杂行为的动力系统提供了可能。除了混沌轨道以似乎不规则难以预测的方式遍历群体状态空间（例如对于共进化动力系统，取值区间为$[0,1]$），它们也会回到其起始点附近。后者是因为混沌映射在拓扑上是传递的，亦即对于任意一对开且非空的子集$U, V \subset X$，都存在$n>0$使得$f^n(U) \cap V \neq \emptyset$ [29]。关于如何理解混沌$f:[0,1] \rightarrow [0,1]$中轨道丰富性的一种非正式做法，是考察轨道的各种状态和它们的密度。举例来说，可移除$[0, 1]$区间上所有不相交的各周期周期轨道，所有最终会周期的点的轨道（即有限次迭代后进入周期轨道的点），以及那些渐近周期的轨道 [47]。那么，仍然会有一类属于集合$U$的点，其轨道甚至不是渐近周期的，而是循环出现的，即存在$n>0$使得$f^n(U) \cap U \neq \emptyset$。
5.4 总结性评述与进一步阅读说明

在本章中，我们对协同进化领域丰富的研究内容进行了总结，特别是针对已知会对协同进化搜索性能产生负面影响的各种病态现象。我们首先回顾了这些协同进化病态现象，并将其分为三类。第一类涉及过度专门化、聚焦性以及不可传递性等病态现象，这些病态现象与协同进化问题中的循环结构有关，并已获得了一定程度的理论性深入理解。这些结构源于解集底层的二元关系，在协同进化的竞争环境中，通常通过两两比较的方式来评估这些解的表现。尽管我们已经讨论了有向图理论（Digraph Theory）是如何被用于对协同进化问题中的结构进行完整刻画的[19]，但我们也引用了其他研究[8, 9]，它们采用序理论（Order Theory）进行了类似的描述。鉴于连接强分量的无环图等价于有限集的偏序关系[2–4]，这并不令人意外。

竞争性协同进化中的循环结构可以被描述为协同进化有向图的一个谱系，在谱系的一端是具有最多3-环的正规有向图，另一端则是无环的传递性有向图。在这两个极端之间，是一个包含大量不可约有向图的区域，这些不可约有向图通过其所包含的3-环数量进行区分，另外还有一个包含大量可约有向图的区域，这些可约有向图都可以分解成若干强连通分量，这些分量之间构成了一个传递性的支配关系链。当从两人对策博弈的视角看待竞争性协同进化时，解集上的二元关系就被表达为策略集上的支配关系。这为与博弈论（Game Theory）[51]的联系提供了依据，也是许多以往竞争性协同进化研究所采用的方法。

除了现有对于协同进化问题（有向图）可归类为可解（可约）或不可解（不可约）的定性认识外，对于这些可解协同进化问题，在协同进化以多快的速度能够搜索到支配解方面，也有定量的刻画[19]。
其余两组病态主要涉及协同进化过程中动力学结构的讨论。尤其值得注意的是，此处所考虑的原始对象是种群配置（状态），每个配置包含了种群中具体存在的解及其数量。不难看出，如今所研究的原始对象明显更加复杂，因此该领域的理解部分依赖于采用生物学概念进行的可控实证研究。例如，我们所归类的最后一组病态，包括脱逸和平庸稳定状态，是在更为复杂的、具有非对称交互的两种群竞争协同进化中观察到的病态表现。然而，通过动力系统理论，对包括循环和遗忘在内的病态现象已经获得了一定深刻且理论性的理解。在此过程中，博弈论，特别是进化博弈论（EGT），作为建模接口发挥了重要作用，使得能够以复制者映射的形式构建协同进化动力系统。关于循环和遗忘的大多数观察可以表达为这些协同进化动力系统所产生的周期轨迹。然而，还存在其他更为复杂和混沌的动力学现象，对其的更为正式的研究已经开始。需要注意的是，迄今为止这些关于协同进化的正式研究均是假设确定性动力学的。除此之外，还有一些研究则考虑了随机性动力学，在这种情况下，协同进化过程会直接引入有限种群效应以及涉及选择与变异的进化过程中的其他随机性，例如通过马尔可夫过程来研究协同进化中的种群动力学，以及针对不同问题结构分析协同进化算法（CEA）的搜索性能。我们将通过文献综述的方式对几项关键研究进行简要总结，并将讨论焦点集中于旨在解决由于协同进化问题中的某些特性（如非传递性）所导致的各种病态问题的方法论，这些方法直接作用于选择过程。需要指出的是，也存在其他机制和启发式方法，例如通过外部存档影响选择的机制。本文重点关注那些直接改变或重构解的适应度值的方法。这些方法被统称为多样性维护技术，这是基于之前有观点与观察表明，它们对协同进化搜索性能的影响归因于在种群中引入并维持多样性的效果。我们首先介绍一类涉及适应度共享的具体方法。适应度共享的概念并非新近提出，此前已在遗传算法中被引入并用于更好地解决多峰优化问题。在竞争型协同进化算法中，适应度共享被用作选择过程中的一种机制，通过改变分配给竞争体的适应度数值，从而引入并保持测试用例种群的多样性，使其能够为解的种群带来不同的挑战。因此，适应度共享的应用可能防止竞争协同进化中过度专业化和收敛现象的出现。接下来，我们将介绍并简要讨论在协同进化中实现适应度共享的两种不同方式。
第一个方法涉及到为捕食者-猎物型竞争协同进化环境设计的竞争适应度共享机制，该方法见于文献[56]。尽管我们的后续描述中符号采用了[56]中提出的两种种群竞争协同进化设定，实际运用时该方法也可便捷地应用于单一竞争协同进化场景。每个进化出的解代理 $\boldsymbol{s} \in \boldsymbol{S}$ 会与对手或测试代理的一个随机子集 $\boldsymbol{T}'_{\boldsymbol{s}} \subset \boldsymbol{T}$ 进行交互，如果采用锦标赛（tournament）模式，而非包含全部种群 $\boldsymbol{T}$ 的循环赛（round robin）模式。与通常将交互建模为胜负游戏、且对所有对手的胜利赋予相同价值的做法不同，竞争适应度共享根据不同对手可以赋予不同的胜利权重。具体实现时，对$\boldsymbol{s}$战胜的每个对手$\boldsymbol{t} \in \boldsymbol{T}'_{\boldsymbol{s}}$，赋予权重 $w_{\boldsymbol{t}} = 1 / n_{\boldsymbol{t}}$，其中 $n_{\boldsymbol{t}}$ 为整个解空间中击败 $\boldsymbol{t}$ 的解代理数目。设完整解空间的规模为 $|\boldsymbol{S}|$。假定仅考虑胜负结果，且平局（包括自我对弈）判为双方皆负，则有 $w_{\boldsymbol{t}} \in [1/(|\boldsymbol{S}| - 1), 1]$。代理$\boldsymbol{s}$的共享适应度计算公式为 $f_{\mathrm{sh}}(\boldsymbol{s}) = \sum_{\boldsymbol{t} \in \boldsymbol{T}'_{\boldsymbol{s}}} w_{\boldsymbol{t}} \cdot M(\boldsymbol{s}, \boldsymbol{t})$，其中 $M(\boldsymbol{s}, \boldsymbol{t})$ 是常规的指派函数，对$\boldsymbol{s}$胜$\boldsymbol{t}$时取1，否则为0。从本质上，该方法鼓励选择在某些测试案例上具有独特解决能力、而其他竞争解较少能够实现的解。$1 / n_{\boldsymbol{t}}$的数值与 $n_{\boldsymbol{t}}$ 成反比例关系，即 $n_{\boldsymbol{t}}$ 越小值越大。

隐式适应度共享[24]采用了一种算法过程，用于近似计算解代理$\boldsymbol{s} \in \boldsymbol{S}$的共享适应度值[59]，其优势在于无需为特定问题设计共享函数[23]。我们将在单种群竞争协同进化环境下介绍该方法。令 $g(\boldsymbol{s}, \boldsymbol{t})$ 表示策略$\boldsymbol{s}$在与$\boldsymbol{t}$进行二人博弈中获得的收益（payoff），同理，$g(\boldsymbol{t}, \boldsymbol{s})$为$\boldsymbol{t}$的收益。对每个种群代理$\boldsymbol{s} \in \boldsymbol{S}$，从种群中随机抽取$C$个测试对手子集$\boldsymbol{T}'_c, \ c=1,\ldots,C$，其中$\boldsymbol{T}'_c \subset \boldsymbol{S}$，且每个子集$\boldsymbol{T}'_c$排除$\boldsymbol{s}$自身以避免自我对弈。对于每个随机子集$\boldsymbol{T}'_c$，该方法为那些在与$\boldsymbol{s}$对弈时获得最大收益的对手分配与实际游戏收益等额的适应度，即 $\max_{\boldsymbol{t} \in \boldsymbol{T}'_c} g(\boldsymbol{t}, \boldsymbol{s})$。若出现并列，则这些对手均分该适应度（即收益被并列人数整除）。需注意的是，该方法适用于将解空间建模为非零和博弈、且最优性定义为累积收益最大化的情形。对于零和博弈，则可采用最大胜利幅度，即 $\max_{\boldsymbol{t} \in \boldsymbol{T}'_c} \delta_{\mathrm{win}}(\boldsymbol{t}, \boldsymbol{s})$，其中 $\delta_{\mathrm{win}}(\boldsymbol{t}, \boldsymbol{s}) = g(\boldsymbol{t}, \boldsymbol{s}) - g(\boldsymbol{s}, \boldsymbol{t})$，若 $\boldsymbol{t}$ 战胜 $\boldsymbol{s}$ 时取该值，否则为0。

另一种直接作用于适应度值，以影响代理选择的做法是降低毒力（reducing virulence）[11, 12]。该受自然界启发的方法基于如下观察：在生物协同进化系统中，过高毒力可能导致宿主失活，进而降低寄生体通过感染新宿主的传播机会，而适中毒力的菌株则有机会更快繁殖，获得进化优势。对于人工竞争协同进化系统，引入降低毒力的思想，旨在防止高表现代理在测试案例上迅速扩增导致协同进化进程停滞（disengagement），以促进长期且持续的协同进化搜索。假定代理$\boldsymbol{s}$的适应度值$f(\boldsymbol{s})$正比于其在测试案例上的表现，如 $f(\boldsymbol{s}) = \sum_{\boldsymbol{t} \in \boldsymbol{T}'} M(\boldsymbol{s}, \boldsymbol{t})$。实现降低毒力的方式是对$f(\boldsymbol{s})$进行重标定，即 $f(\boldsymbol{s}, v) = \frac{2f(\boldsymbol{s})}{v} - \frac{f(\boldsymbol{s})}{v}$。
$f({\boldsymbol s}, v) = \frac{2f({\boldsymbol s})}{v} - \Big(\frac{f({\boldsymbol s})}{v}\Big)^2$[12]，其中参数 $v \in [0.5, 1.0]$ 控制了代表极大化 $f({\boldsymbol s})$ 倾向的毒力（virulence）水平。例如，标准的协同进化在最大毒力水平下运行，即 $v = 1.0$。该函数在以 $f({\boldsymbol s})$ 为定义域、以 $f({\boldsymbol s}, 1.0)$ 为值域的情况下是单射的（即一一对应），因此鼓励个体极大化它们的适应度值。当 $v = 0.75$ 时，该函数为满射（即多对一），此时一些较高的 $f({\boldsymbol s})$ 值会被映射到较低的 $f({\boldsymbol s}, 0.75)$ 值，从而惩罚种群中表现较优的个体，防止搜索过程过于集中于那些极大化相对适应度的解。最后，我们引入了基于多目标进化算法框架[27, 32, 52]的帕累托协同进化方法。在竞争性协同进化中，可以认为不应仅仅基于值的加权和 $f({\boldsymbol s}) = \sum_{{\boldsymbol t} \in {\boldsymbol T}'} M({\boldsymbol s}, {\boldsymbol t})$ 来采用相对适应度值。这是因为对于某些测试案例，结果可能更加重要，从而需要非均匀权重。更重要的是，在协同进化生成的不同种群配置中，权重集也可能发生变化。帕累托协同进化直接通过将测试案例作为问题的不同、内在目标来表示，从而解决了这一问题，要求每个解个体都必须应对这些目标。选择过程基于种群中个体相对于一组测试案例的帕累托支配关系。对于解个体 ${\boldsymbol s}_i, \ i = 1, \ldots, S$ 和测试案例 ${\boldsymbol t}_k, \ k = 1, \ldots, T$ 的双种群竞争性协同进化[27]，可表示为
$${\boldsymbol s}_i \succ {\boldsymbol s}_j \iff \forall {\boldsymbol t}_k : g({\boldsymbol s}_i, {\boldsymbol t}_k) \geq g({\boldsymbol s}_j, {\boldsymbol t}_k) \land \exists {\boldsymbol t}_k : g({\boldsymbol s}_i, {\boldsymbol t}_k) > g({\boldsymbol s}_j, {\boldsymbol t}_k).$$
通俗地讲，当且仅当 ${\boldsymbol s}_i$ 在 $T$ 个目标（每个目标由测试案例 ${\boldsymbol t}_k$ 表示）中，对每一个目标的博弈得分至少与 ${\boldsymbol s}_j$ 相等，并且至少存在一个目标使得 ${\boldsymbol s}_i$ 的得分优于 ${\boldsymbol s}_j$ 时，${\boldsymbol s}_i$ 帕累托支配 ${\boldsymbol s}_j$。当 ${\boldsymbol s}_i$ 在至少一个目标上优于 ${\boldsymbol s}_j$，同时 ${\boldsymbol s}_j$ 在至少另一个目标上又优于 ${\boldsymbol s}_i$，其余目标两者相同，则二者互不支配。一般而言，该机制会根据个体之间的帕累托支配关系，将个体按照帕累托层级进行排序。帕累托前沿（Pareto front）上的互不支配个体将是最优先选择的对象。通过从高一层的互不支配个体中系统性地移除，可以依次获取后续的帕累托层[32]。需要注意的是，在单种群竞争环境下，此类帕累托支配排序将生成强连通分量所构成的无环支配链，这些分量对应于帕累托层[19]。
